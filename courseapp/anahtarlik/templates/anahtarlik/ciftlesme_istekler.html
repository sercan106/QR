{% extends 'ana.html' %}
{% block content %}
<div class="container py-4">
  <h4>Çiftleşme İstekleri</h4>

  <h6 class="mt-3">Bekleyen</h6>
  <ul class="list-group mb-3">
    {% for i in bekleyen %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ i.gonderen.ad }}</strong> → {{ i.hedef.ad }}
          <div class="small text-muted">{{ i.mesaj|default:"" }}</div>
        </div>
        <div>
          <a class="btn btn-sm btn-success" href="{% url 'ciftlesme_istek_karar' i.id 'kabul' %}">Kabul</a>
          <a class="btn btn-sm btn-outline-danger" href="{% url 'ciftlesme_istek_karar' i.id 'red' %}">Red</a>
        </div>
      </li>
    {% empty %}
      <li class="list-group-item">Bekleyen istek yok.</li>
    {% endfor %}
  </ul>

  <h6 class="mt-3">Gönderdiğim İstekler</h6>
  <ul class="list-group mb-3">
    {% for i in gonderdigim %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ i.gonderen.ad }}</strong> → {{ i.hedef.ad }}
          <span class="badge bg-light text-dark ms-2">{{ i.durum|title }}</span>
          {% if i.mesaj %}<div class="small text-muted">({{ i.mesaj }})</div>{% endif %}
        </div>
        {% if i.durum == 'kabul' %}
          <a class="btn btn-sm btn-outline-primary" href="{% url 'ciftlesme_sohbet' i.id %}">Mesajlaş</a>
        {% endif %}
      </li>
    {% empty %}
      <li class="list-group-item">Gönderdiğiniz istek yok.</li>
    {% endfor %}
  </ul>

  <h6 class="mt-3">Kabul Edilen</h6>
  <ul class="list-group mb-3">
    {% for i in kabul_edilen %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ i.gonderen.ad }}</strong> → {{ i.hedef.ad }} (Kabul)
        </div>
        <a class="btn btn-sm btn-outline-primary" href="{% url 'ciftlesme_sohbet' i.id %}">Mesajlaş</a>
      </li>
    {% empty %}
      <li class="list-group-item">Kayıt yok.</li>
    {% endfor %}
  </ul>

  <h6 class="mt-3">Reddedilen</h6>
  <ul class="list-group">
    {% for i in reddedilen %}
      <li class="list-group-item">
        <strong>{{ i.gonderen.ad }}</strong> → {{ i.hedef.ad }} (Red)
      </li>
    {% empty %}
      <li class="list-group-item">Kayıt yok.</li>
    {% endfor %}
  </ul>

  <div class="mt-3">
    <a href="{% url 'ciftlesme_kesfet' %}" class="btn btn-outline-secondary">Keşfet'e dön</a>
  </div>
  
</div>
{% endblock %}
